(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{307:function(s,a,e){s.exports=e.p+"assets/img/05.c4971390.jpg"},308:function(s,a,e){s.exports=e.p+"assets/img/01.74580573.png"},309:function(s,a,e){s.exports=e.p+"assets/img/02.74580573.png"},310:function(s,a,e){s.exports=e.p+"assets/img/03.74580573.png"},311:function(s,a,e){s.exports=e.p+"assets/img/04.b0d8ec4c.png"},312:function(s,a,e){s.exports=e.p+"assets/img/06.8c85fe90.png"},453:function(s,a,e){"use strict";e.r(a);var n=e(14),t=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[s._v("#")]),s._v(" Docker")]),s._v(" "),a("h2",{attrs:{id:"容器技术介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器技术介绍"}},[s._v("#")]),s._v(" 容器技术介绍")]),s._v(" "),a("p",[s._v("我们说的容器 container是指一项技术，而Docker只是一个容器技术的实现，或者说让容器技术普及开来的最成功的的实现。简单来说，容器技术是一种打包技术，它拥有以下三个特点：")]),s._v(" "),a("ul",[a("li",[s._v("标准化")]),s._v(" "),a("li",[s._v("轻量化")]),s._v(" "),a("li",[s._v("易移植")])]),s._v(" "),a("h3",{attrs:{id:"容器技术的标准化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器技术的标准化"}},[s._v("#")]),s._v(" 容器技术的标准化")]),s._v(" "),a("ul",[a("li",[s._v("容器会加速你的软件开发")]),s._v(" "),a("li",[s._v("容器会加速程序的编译和构建")]),s._v(" "),a("li",[s._v("容器会加速测试")]),s._v(" "),a("li",[s._v("容器会加速故障修复")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://dockertips.readthedocs.io/en/latest/",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考文档"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"什么是docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是docker"}},[s._v("#")]),s._v(" 什么是Docker")]),s._v(" "),a("p",[s._v("Docker 是一个开源的应用容器引擎。开发者可以将自己的应用打包在自己的镜像里面，然后迁移到其他平台的 Docker 中。镜像中可以存放你自己自定义的运行环境，文件，代码，设置等等内容，再也不用担心环境造成的运行问题。镜像共享运行机器的系统内核。")]),s._v(" "),a("p",[s._v("同样， Docker 也支持跨平台。你的镜像也可以加载在 Windows 和 Linux，实现快速运行和部署。")]),s._v(" "),a("h2",{attrs:{id:"docker解决了什么问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker解决了什么问题"}},[s._v("#")]),s._v(" Docker解决了什么问题")]),s._v(" "),a("p",[s._v("一句话，解决了运行环境和配置问题的"),a("strong",[s._v("软件容器")]),s._v("，方便于持续集成并有助于整体发布推动软件虚拟化技术。")]),s._v(" "),a("h2",{attrs:{id:"docker三要素"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker三要素"}},[s._v("#")]),s._v(" Docker三要素")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("镜像 (image)")]),s._v(":")])]),s._v(" "),a("p",[s._v("Docker镜像就是一个"),a("strong",[s._v("只读")]),s._v("的模板，镜像可以用来创建docker容器，一个镜像可以创建很多容器。镜像其实是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需要的所有内容，包括代码、依赖、库、环境和配置文件, 可以理解为一个模板，镜像具有分层的概念")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("容器（Container）")])])]),s._v(" "),a("p",[s._v("Docker利用容器（Container）独立运行的一个或者一组应用，容器是用镜像创建爱你的"),a("strong",[s._v("运行实例")]),s._v("。它可以被启动、开始、停止、删除。每个容器都是相互隔离的、保证平台的安全。可以把容器看成是一个简单的Linux环境（包括root用户权限、进程空间、用户空间和网络空间等）和运行在其中的应用程序。容器的定义几乎和镜像一模一样，也是一堆层的统一视角，唯一区别在于容器的最上面那一层是"),a("strong",[s._v("可读可写")]),s._v("的。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("仓库")])])]),s._v(" "),a("p",[s._v("是集中存放镜像的地方,我们可以把镜像发布到仓储中，需要的时候从仓储中拉取下来就可以了。")]),s._v(" "),a("h2",{attrs:{id:"docker架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker架构"}},[s._v("#")]),s._v(" Docker架构")]),s._v(" "),a("p",[a("img",{attrs:{src:e(307),alt:"docker架构"}})]),s._v(" "),a("h2",{attrs:{id:"docker安装-centos7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker安装-centos7"}},[s._v("#")]),s._v(" Docker安装 (CentOS7)")]),s._v(" "),a("p",[s._v("在Docker安装之前，我们首先安装"),a("code",[s._v("device-mapper-persistent-data")]),s._v(" 和 "),a("code",[s._v("lvm2")]),s._v(" 两个依赖。")]),s._v(" "),a("p",[a("code",[s._v("device-mapper-persistent-data")]),s._v(" 是 "),a("code",[s._v("Lunix")]),s._v("下的一个存储驱动，Linux 上的高级存储技术。")]),s._v(" "),a("p",[a("code",[s._v("lvm2")]),s._v(" 的作用是创建逻辑磁盘分区，这里我们使用CentOS的Yum包管理工具安装两个依赖。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" yum-utils device-mapper-persistent-data lvm2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:e(308),alt:"前置依赖"}})]),s._v(" "),a("p",[s._v("依赖安装完毕后，我们将阿里云的 Docker 镜像源添加进去。可以加速 Docker 的安装。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("最后安装 docker")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:e(309),alt:"docker安装完毕"}})]),s._v(" "),a("p",[s._v("接着执行一下 "),a("code",[s._v("docker -v")]),s._v(" ，这条命令可以用来查看 Docker 安装的版本信息。当然也可以帮助我们查看 docker 安装状态。如果正常展示版本信息，代表 Docker 已经安装成功。")]),s._v(" "),a("p",[s._v("如果我们在终端中输入：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("会显示以下信息,下面的信息显示的docker在安装过程中安装了 客户端和服务端。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Client: Docker Engine - Community\n Version:           20.10.10\n API version:       1.41\n Go version:        go1.16.9\n Git commit:        b485636\n Built:             Mon Oct 25 07:42:56 2021\n OS/Arch:           linux/amd64\n Context:           default\n Experimental:      true\n\nServer: Docker Engine - Community\n Engine:\n  Version:          20.10.10\n  API version:      1.41 (minimum version 1.12)\n  Go version:       go1.16.9\n  Git commit:       e2f740d\n  Built:            Mon Oct 25 07:41:17 2021\n  OS/Arch:          linux/amd64\n  Experimental:     false\n containerd:\n  Version:          1.4.11\n  GitCommit:        5b46e404f6b9f661a205e28d59c982d3634148f8\n runc:\n  Version:          1.0.2\n  GitCommit:        v1.0.2-0-g52b36a2\n docker-init:\n  Version:          0.19.0\n  GitCommit:        de40ad0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("p",[s._v("docker安装完毕之后，需要重启docker，不然可能会遇到无法使用的情况。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Cannot connect to the Docker daemon at unix:/var/run/docker.sock. Is the docker daemon running?\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:e(310),alt:"验证版本"}})]),s._v(" "),a("h2",{attrs:{id:"安装docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker-compose"}},[s._v("#")]),s._v(" 安装docker-compose")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方网站地址"),a("OutboundLink")],1),s._v("\n运行此命令以下载 Docker Compose 的当前稳定版本：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" /usr/local/bin/docker-compose\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果你想安装的版本不是1.29.2，直接替换这个版本号即可。")]),s._v(" "),a("p",[s._v("对二进制文件应用可执行权限")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"安装完毕之后测试版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装完毕之后测试版本"}},[s._v("#")]),s._v(" 安装完毕之后测试版本")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"docker安装-hello-world镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker安装-hello-world镜像"}},[s._v("#")]),s._v(" Docker安装 hello-world镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run hello-world\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:e(311),alt:"hello-world"}})]),s._v(" "),a("p",[s._v("从图中展示的信息可以看到，在执行run命令的时候，首先会从本地查找镜像，发现在本地没有找到，就去仓库中寻找，下载之后，基于这个镜像创建一个容器。")]),s._v(" "),a("h2",{attrs:{id:"docker镜像常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像常用命令"}},[s._v("#")]),s._v(" Docker镜像常用命令")]),s._v(" "),a("p",[s._v("帮助命令")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 帮助命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("在终端输入"),a("code",[s._v("docker image")]),s._v(" 就能够列出 docker 关于镜像的所有操作方法：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image\n\nUsage:  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image COMMAND\n\nManage images\n\nCommands:\n  build       Build an image from a Dockerfile\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v("     Show the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" of an image\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v("      Import the contents from a tarball to create a filesystem image\n  inspect     Display detailed information on one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" images\n  load        Load an image from a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive or STDIN\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("          List images\n  prune       Remove unused images\n  pull        Pull an image or a repository from a registry\n  push        Push an image or a repository to a registry\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("          Remove one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" images\n  save        Save one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" images to a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("streamed to STDOUT by default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE\n\nRun "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker image COMMAND --help'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" information on a command.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("按照提示，进一步，如果想要查看某一个镜像的命令，可以继续操作, 例如：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image pull "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("\n\nUsage:  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image pull "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":TAG"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("@DIGEST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nPull an image or a repository from a registry\n\nOptions:\n  -a, --all-tags                Download all tagged images "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the repository\n      --disable-content-trust   Skip image verification "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--platform")]),s._v(" string         Set platform "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" server is multi-platform capable\n  -q, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--quiet")]),s._v("                   Suppress verbose output\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("列出本地主机上的所有镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出本地主机上的所有镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:e(312),alt:"镜像"}})]),s._v(" "),a("p",[s._v("各个选项说明:")]),s._v(" "),a("ul",[a("li",[s._v("REPOSITORY: 表示镜像仓库")]),s._v(" "),a("li",[s._v("TAG: 镜像标签")]),s._v(" "),a("li",[s._v("IMAGE ID: 镜像id")]),s._v(" "),a("li",[s._v("CREATED: 镜像创建时间")]),s._v(" "),a("li",[s._v("SIZE: 镜像大小")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("同一个仓库可以有多个TAG，代表这个仓库源的不同个版本，我们使用"),a("code",[s._v("REPOSITORY:TAG")]),s._v(" 来定义不同的镜像。如果你不指定一个镜像的版本标签，将默认是使用最新的版本。")])]),s._v(" "),a("p",[s._v("当然 docker images 后面还可以添加 options 参数：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" // 显示全部镜像，镜像是分层的\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),s._v(" // 只显示镜像的 images "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search xxx // 从dockerhub 中查找指定名称的镜像\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" xxx // 查找指定镜像在一定star数量之上的\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull xxx // 拉取指定名称的镜像 注意默认拉取的是最新的版本的镜像\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi  xxx // 删除指定镜像 如果不添加任何标签默认删除最新版本的镜像\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" xxx // 强制删除指定镜像\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" inspect 镜像id // 查看指定镜像的详细信息\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("如果我想要搜索 mongo 数据库，可以执行命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search mongo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果我想拉取 mongo和centos镜像，可以执行命令:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认拉取最新版本的镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull mongo\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取centos最新版本的镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull centos\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取指定版本的镜像(后面使用冒号指定版本号)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull mongo:3.4.1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 id 0dffc7177b06 详细信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" inspect  0dffc7177b06\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("如果我想要删除 hello-world 这个镜像，可以执行命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi hello-world\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("当然我们还可以通过id删除镜像，分为两个步骤：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有的镜像")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\nREPOSITORY            TAG       IMAGE ID       CREATED         SIZE\nbusybox               latest    16ea53ea7c65   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" months ago    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".24MB\nnginx                 latest    ad4c705f24d3   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" months ago    133MB\noutlinewiki/outline   latest    c2b92b5cd802   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" months ago    471MB\nhello-world           latest    d1165f221234   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" months ago   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\neasymock/easymock     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),s._v(".0     193a7b904d4f   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" years ago     699MB\nredis                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v(".6     1e70071f4af4   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" years ago     107MB\nmongo                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),s._v(".1     0dffc7177b06   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" years ago     402MB\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行 rmi 命令")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi c2b92b5cd802 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"docker容器常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker容器常用命令"}},[s._v("#")]),s._v(" Docker容器常用命令")]),s._v(" "),a("p",[s._v("一般执行容器命令的时候 使用 "),a("code",[s._v("docker container xxx")]),s._v(" 这种形式， 当然我们可以使用简写，将中间的 container 省略掉。")]),s._v(" "),a("h3",{attrs:{id:"新建并启动容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建并启动容器"}},[s._v("#")]),s._v(" 新建并启动容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("options说明：\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"容器新名字"')]),s._v("：为容器指定一个名称\n-d: 后台运行容器，并返回容器ID\n-i: 以交互模式运行容器，通常与 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" 同时使用\n-t: 为容器分配一个伪输入终端，通常与 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" 同时使用\n-P: 随机端口映射\n-p: 指定端口映射，有以下四种格式\n  ip:hostPort: containerPort\n  ip::containerPort\n  hostPort: containerPort\n  containerPort\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"列出当前所有正在运行的容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#列出当前所有正在运行的容器"}},[s._v("#")]),s._v(" 列出当前所有"),a("strong",[s._v("正在运行")]),s._v("的容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示出当前我的服务器中启动的所有的容器")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\nCONTAINER ID   IMAGE                     COMMAND                  CREATED        STATUS        PORTS                      NAMES\n0c1c8d14921b   mongo:3.4.1               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" hours ago   Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" hours   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:27017-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp   yapi-mongodb-docker\nc9693a7fa9dd   easymock/easymock:1.6.0   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash -c \'npm r…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago    Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:7300-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7300")]),s._v("/tcp     easy-mock_web_1\nf506572bb5c7   mongo:3.4.1               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago    Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp                  easy-mock_mongodb_1\n4a7a0c8348a7   redis:4.0.6               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago    Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp                   easy-mock_redis_1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("当然这个命令也是可以添加options的")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-a 列出当前所有正在运行的容器 + 历史上运行过的\n-l 显示最近创建的容器\n-n 显示最近n个创建的容器\n-q 静默模式，只显示容器编号\n--no-trunc 不截断输出\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("docker ps -a")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v("\nCONTAINER ID   IMAGE                     COMMAND                  CREATED             STATUS                         PORTS                      NAMES\nea1732dfe8de   centos                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" minutes ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" minutes ago                                 mycentos\n3fe4caec1b0a   nginx                     "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" minutes ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" minutes ago                                 my-nginx\nebb4102ec952   nginx                     "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.…"')]),s._v("   About an hour ago   Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" About an hour ago                              nginx-server\n0c1c8d14921b   mongo:3.4.1               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" hours ago        Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(" hours                    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:27017-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp   yapi-mongodb-docker\nc9693a7fa9dd   easymock/easymock:1.6.0   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash -c \'npm r…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago         Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours                     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:7300-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7300")]),s._v("/tcp     easy-mock_web_1\nf506572bb5c7   mongo:3.4.1               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago         Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours                     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp                  easy-mock_mongodb_1\n4a7a0c8348a7   redis:4.0.6               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago         Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" hours                     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp                   easy-mock_redis_1\n0ffe03ebfdeb   hello-world               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/hello"')]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" months ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" months ago                                   sad_jackson\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"启动容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动容器"}},[s._v("#")]),s._v(" 启动容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 首先启动容器 进入交互式命令")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mycentos centos\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@941b40fa94aa /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出交互式命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@941b40fa94aa /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出容器之后，想要查看上一个刚退出的容器，可以看到，上次启动的是 mycentos ")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\nCONTAINER ID   IMAGE     COMMAND       CREATED         STATUS                          PORTS     NAMES\n941b40fa94aa   centos    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago   Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" About a minute ago             mycentos\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("有时候，我们并不想使用交互式启动命令的方式，只想启动之后让它在后台运行，这个时候我们可以添加 -d 这个选项")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我想要后台运行 centos 可以执行下面的命令")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" centos\n9a52cdc137ef7e2efef6919a5e296b555baf5524f1a1d82170f1c9c28b1e7a31\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("此时执行 docker ps 这个命令是查找不出来这个后台运行的容器的。执行 docker ps -a 是能够显示出来这个容器的，但是状态是退出的状态：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v("\nCONTAINER ID   IMAGE                     COMMAND                  CREATED          STATUS                     PORTS                      NAMES\n9a52cdc137ef   centos                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" minutes ago   Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" minutes ago                              dazzling_clarke\n0c1c8d14921b   mongo:3.4.1               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" days ago       Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" days                  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:27017-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp   yapi-mongodb-docker\nc9693a7fa9dd   easymock/easymock:1.6.0   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash -c \'npm r…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago      Up About an hour           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:7300-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7300")]),s._v("/tcp     easy-mock_web_1\nf506572bb5c7   mongo:3.4.1               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh mong…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" hours                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("/tcp                  easy-mock_mongodb_1\n4a7a0c8348a7   redis:4.0.6               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" hours                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp                   easy-mock_redis_1\n0ffe03ebfdeb   hello-world               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/hello"')]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" months ago     Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" months ago                               sad_jackson\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("blockquote",[a("p",[s._v("docker 容器的后台运行, 就必须有一个前台进程，容器运行的命令如果不是那些一直挂起的命令，就是会自动退出的。这个是docker的运行机制问题。")])]),s._v(" "),a("h3",{attrs:{id:"重启容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重启容器"}},[s._v("#")]),s._v(" 重启容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker restart 容器id 或者容器名称")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 比如我想重新启动easymock这个容器，可以执行命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" restart  c9693a7fa9dd\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令行返回 c9693a7fa9dd 说明重启成功")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"停止容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止容器"}},[s._v("#")]),s._v(" 停止容器")]),s._v(" "),a("p",[s._v("docker stop  容器ID")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" stop  c9693a7fa9dd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"强制停止容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#强制停止容器"}},[s._v("#")]),s._v(" 强制停止容器")]),s._v(" "),a("p",[s._v("docker kill 容器ID")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制停止容器 c9693a7fa9dd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" c9693a7fa9dd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"删除已经停止的容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除已经停止的容器"}},[s._v("#")]),s._v(" 删除已经停止的容器")]),s._v(" "),a("p",[s._v("docker rm 容器ID")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除已经停止掉的容器 c9693a7fa9dd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" c9693a7fa9dd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"查看容器内部细节"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看容器内部细节"}},[s._v("#")]),s._v(" 查看容器内部细节")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器其实是一层一层的，这个命令可以显示内部的细节")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" inspect c9693a7fa9dd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"拷贝docker中的文件到宿主机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拷贝docker中的文件到宿主机"}},[s._v("#")]),s._v(" 拷贝docker中的文件到宿主机")]),s._v(" "),a("p",[s._v("docker cp 容器ID：容器内的路径 目标主机路径")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将docker中nginx的配置文件拷贝到宿主机的cp目录下")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" xxxxx: /ect/nginx/nginx.conf /ect/nginx/cp/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"以指定端口映射启动容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#以指定端口映射启动容器"}},[s._v("#")]),s._v(" 以指定端口映射启动容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -p 宿主机端口:docker容器启动的端口 -d 指的是后台启动  --name 设置别名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" MyNginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80  nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动redis 指定版本的redis 使用的是冒号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" myredis "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(":6379 redis:4.0.6\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"docker容器数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker容器数据卷"}},[s._v("#")]),s._v(" Docker容器数据卷")]),s._v(" "),a("p",[s._v("docker理念就是将应用与运行的环境打包形成容器运行，运行可以伴随着容器，但是我们对数据的要求希望是持久化的，容器之间希望可以共享数据")]),s._v(" "),a("p",[s._v("docker容器产生的数据，如果不通过 docker commit 生产新的镜像，使得数据作为镜像的一部分保存下来，那么当容器删除之后，数据自然也就没有了。")]),s._v(" "),a("p",[s._v("为了能保存数据，在docker中我们卷的概念。")]),s._v(" "),a("h3",{attrs:{id:"以nginx为例-在docker上启动nginx并配置容器数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#以nginx为例-在docker上启动nginx并配置容器数据卷"}},[s._v("#")]),s._v(" 以nginx为例，在docker上启动nginx并配置容器数据卷")]),s._v(" "),a("p",[s._v("1、首先使用docker 拉取镜像,如果不加版本号，默认是最新版本")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" pull nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("2、使用docker 启动nginx")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -d 后台运行  -p 80:80 宿主机的端口映射nginx的端口 --name 别名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mynginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("3、重新开一个命令交互启动我们自己的nginx")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" mynginx "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("4、我们想要修改nginx的配置文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/nginx/nginx.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("执行上述命令发现容器内部实际上并没有安装 vim 这个工具，可以使用 apt-get 进行安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新源")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$apt")]),s._v("-get update\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装vim")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$apt")]),s._v("-get "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("5、当然这种方式还是有些繁琐，我们可以把宿主机上的配置文件映射到 容器nginx容器里面")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mynginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /usr/local/docker/my-docker-nginx/vuepress:/usr/share/nginx/html/vuepress  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /usr/local/docker/my-docker-nginx/conf.d/default.conf:/etc/nginx/conf.d/default.conf nginx \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("解释下上述命令的含义:")]),s._v(" "),a("ul",[a("li",[s._v("docker run --name mynginx : 以 mynginx为别名启动nginx")]),s._v(" "),a("li",[s._v("-d: 代表的是后台启动")]),s._v(" "),a("li",[s._v("-p 80:80 用宿主机的80端口映射 docker容器中nginx的80端口")]),s._v(" "),a("li",[s._v("-v /usr/local/docker/my-docker-nginx/vuepress:/usr/share/nginx/html/vuepress 宿主机的vuepress目录映射到 docker容器中的文件目录")]),s._v(" "),a("li",[s._v("-v /usr/local/docker/my-docker-nginx/conf.d/default.conf:/etc/nginx/conf.d/default.conf 宿主机的文件替换容器文件")]),s._v(" "),a("li",[s._v("nginx 启动的是nginx")])]),s._v(" "),a("h2",{attrs:{id:"阿里云使用mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#阿里云使用mongodb"}},[s._v("#")]),s._v(" 阿里云使用mongoDB")]),s._v(" "),a("p",[s._v("我已经在将docker3.4.1版本的镜像下载到阿里云上，一个镜像可以构建多个容器。")]),s._v(" "),a("p",[s._v("之前因为使用默认的端口号，并且没有设置密码，导致被黑客攻击。启动的时候需要替换一个不太常用的端口号。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" myMongo "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27898")]),s._v(":27017 mongo:3.4.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这样启动之后，阿里云的安全组需要重新配置，才能生效。")]),s._v(" "),a("h2",{attrs:{id:"阿里云使用redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#阿里云使用redis"}},[s._v("#")]),s._v(" 阿里云使用redis")]),s._v(" "),a("p",[s._v("我的阿里云服务器上已经下载好了redis镜像，下载的版本是"),a("code",[s._v("redis:4.0.6")]),s._v("。")]),s._v(" "),a("p",[s._v("我的诉求是以指定的端口启动，防止被黑客攻击，映射到容器内的6379端口，并能够通过外网访问。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" my-docker-redis "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6978")]),s._v(":6379 redis:4.0.6\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这样启动之后，阿里云的安全组需要重新配置，才能生效。")]),s._v(" "),a("h2",{attrs:{id:"dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[s._v("#")]),s._v(" DockerFile")]),s._v(" "),a("h3",{attrs:{id:"dockerfiles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfiles"}},[s._v("#")]),s._v(" "),a("RouterLink",{attrs:{to:"/docker/Dockerfiles.html"}},[s._v("Dockerfiles")])],1),s._v(" "),a("h2",{attrs:{id:"docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[s._v("#")]),s._v(" Docker Compose")]),s._v(" "),a("p",[a("RouterLink",{attrs:{to:"/docker/docker-compose.html"}},[s._v("docker-compose")])],1)])}),[],!1,null,null,null);a.default=t.exports}}]);