(window.webpackJsonp=window.webpackJsonp||[]).push([[276],{674:function(s,e,t){"use strict";t.r(e);var a=t(14),r=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"sentry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sentry"}},[s._v("#")]),s._v(" sentry")]),s._v(" "),e("h2",{attrs:{id:"sentry-简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sentry-简介"}},[s._v("#")]),s._v(" Sentry 简介")]),s._v(" "),e("p",[s._v("Sentry 是一套开源的实时异常收集、追踪、监控系统，可以为开发者的提供帮助、诊断，修复和优化其代码的性能的能力，可以用它来监控线上服务的健康状态，实时收集的异常堆栈信息可以帮助我们快速发现、定位和修复问题。这套解决方案由对应各种语言的 SDK 和一套庞大的数据后台服务组成。通过 SDK 在客户端把异常数据、性能指标等信息上报到数据服务之后，会通过过滤、关键信息提取、归纳展示在管理后台的界面中。然后我们可以在管理后台界面中实时查看应用的异常状态。Sentry 还可以第一时间将报错的信息：页面路由、异常文件、请求方式等一些非常详细的信息以消息或者邮件的方式通知我们。")]),s._v(" "),e("h2",{attrs:{id:"为什么选择sentry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为什么选择sentry"}},[s._v("#")]),s._v(" 为什么选择Sentry？")]),s._v(" "),e("p",[s._v("在市场上有许多供应商提供类似的一体化解决方案，国外有 BugSnag、 RollBar，国内有 oneapm、fundebug、神策等，那为什么我们偏偏选择 Sentry 呢？")]),s._v(" "),e("p",[s._v("因为 Sentry 是 100% 开源的，我们可以使用它的 SaaS 版的，除此之外我们也可以私有化部署。")]),s._v(" "),e("p",[s._v("另外 Sentry 支持主流的编程语言。")]),s._v(" "),e("h2",{attrs:{id:"下载sentry-docker-仓库并部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载sentry-docker-仓库并部署"}},[s._v("#")]),s._v(" 下载Sentry docker 仓库并部署")]),s._v(" "),e("p",[s._v("Sentry 的管理后台是基于 Python Django 开发的。这个管理后台由背后的 Postgres 数据库（管理后台默认的数据库）、ClickHouse（存数据特征的数据库）、relay、kafka、redis 等一些基础服务或由 Sentry 官方维护的总共 23 个服务支撑运行。如果独立的部署和维护这 23 个服务将是异常复杂和困难的。幸运的是，官方提供了基于 docker 镜像的一键部署实现: getsentry/self-hosted。")]),s._v(" "),e("h3",{attrs:{id:"下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[s._v("#")]),s._v(" 下载")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/getsentry/self-hosted\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("根据文档说明，部署sentry对服务器的要求挺高:")]),s._v(" "),e("ul",[e("li",[s._v("Docker 19.03.6+")]),s._v(" "),e("li",[s._v("Compose 1.28.0+")]),s._v(" "),e("li",[s._v("4 CPU Cores")]),s._v(" "),e("li",[s._v("8 GB RAM")]),s._v(" "),e("li",[s._v("20 GB Free Disk Space")])]),s._v(" "),e("h3",{attrs:{id:"检查自己的服务器配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#检查自己的服务器配置"}},[s._v("#")]),s._v(" 检查自己的服务器配置")]),s._v(" "),e("h4",{attrs:{id:"docker版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker版本"}},[s._v("#")]),s._v(" docker版本:")]),s._v(" "),e("p",[s._v("我进入自己的阿里云服务器，检查自己的配置：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\nDocker version "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.10")]),s._v(".10, build b485636 \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("我得docker版本符合要求。")]),s._v(" "),e("h4",{attrs:{id:"检查自己的-docker-compose-版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#检查自己的-docker-compose-版本"}},[s._v("#")]),s._v(" 检查自己的 docker-compose 版本")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" version "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.29")]),s._v(".2, build 5becea4c\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);