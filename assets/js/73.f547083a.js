(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{416:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"babel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[s._v("#")]),s._v(" Babel")]),s._v(" "),t("h2",{attrs:{id:"babel-的编译流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-的编译流程"}},[s._v("#")]),s._v(" babel 的编译流程")]),s._v(" "),t("p",[s._v("babel 是 source to source 的转换，整体编译流程分为三步：")]),s._v(" "),t("ul",[t("li",[s._v("parse：通过 parser 把源码转成抽象语法树（AST）")]),s._v(" "),t("li",[s._v("transform：遍历 AST，调用各种 transform 插件对 AST 进行增删改")]),s._v(" "),t("li",[s._v("generate：把转换后的 AST 打印成目标代码，并生成 sourcemap")])]),s._v(" "),t("h2",{attrs:{id:"babel-常用的包说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-常用的包说明"}},[s._v("#")]),s._v(" babel 常用的包说明")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("@babel/preset-env")]),s._v(":  "),t("code",[s._v("@babel/preset-env")]),s._v(" 是 Babel 的一个预设，它根据目标环境自动确定需要转换的语法和功能，从而使开发者不必手动配置每个转换。")])]),s._v(" "),t("p",[s._v("假设你的项目使用了一些新的 ECMAScript 特性，比如箭头函数、模板字符串、let 和 const 等，而你希望在转换时只针对较老的浏览器，比如 Internet Explorer 11。在这种情况下，你可以创建一个 .babelrc 文件或在 package.json 中的 babel 字段中进行配置，指定 "),t("code",[s._v("@babel/preset-env")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .babelrc 文件中的配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"targets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ie"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"11"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package.json 中的配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"babel"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"targets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ie"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"11"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("p",[s._v("在这个例子中，targets 指定了目标环境，即 Internet Explorer 11。@babel/preset-env 将会根据这个目标环境自动确定需要的转换，以确保你的代码在这个特定浏览器版本中能够正常运行。这样，你就不需要手动管理每个特性的转换配置，Babel 会帮你根据目标环境进行优化。")]),s._v(" "),t("p",[s._v("如果你在使用 "),t("code",[s._v("@babel/preset-env")]),s._v(" 时没有指定 "),t("code",[s._v("targets")]),s._v(" 属性，Babel 将会默认使用配置中的 browserslist 属性（如果存在的话）来确定目标环境。如果 browserslist 也不存在，那么默认情况下，"),t("code",[s._v("@babel/preset-env")]),s._v(" 将转换为当前主流浏览器的最新两个版本。")]),s._v(" "),t("p",[s._v("举个例子，如果你的项目的 package.json 文件包含了 browserslist 配置，例如：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"browserslist"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"> 0.5%, last 2 versions, Firefox ESR, not dead"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// > 0.5%: 包括全球使用量超过 0.5% 的浏览器版本。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// last 2 versions: 包括每个浏览器的最新两个版本。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Firefox ESR: 包括 Firefox 的 ESR（Extended Support Release）版本。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// not dead: 排除那些已经被官方宣布为 "dead"（不再支持更新）的浏览器。')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("那么 "),t("code",[s._v("@babel/preset-env")]),s._v(" 将会根据这个配置确定需要进行的转换。这样，你可以确保你的代码在项目目标浏览器范围内得到了适当的转换，而不需要手动指定 targets。")]),s._v(" "),t("p",[s._v("如果你没有在项目中设置 browserslist 且也没有手动设置 targets，@babel/preset-env 将默认转换为最新两个版本的主流浏览器。这样的默认配置通常适用于大多数项目，因为大多数开发者希望支持当前和上一个主流浏览器版本。")])])}),[],!1,null,null,null);t.default=e.exports}}]);